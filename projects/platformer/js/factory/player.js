"use strict";!function(n){n.opspark=n.opspark||{};let e=n.opspark,t={};function o(){console.log("doing nothing!")}e.createPlayer=function(n){let e;var i,a,d="duck",r="flyingJump";let u;var f,s="stop",l="fire";let m;var c="die";let p,y=(i=n,e=i.add.sprite(30,600,"halle"),e.anchor.setTo(.5,1),t.walk=e.animations.add("walk",Phaser.Animation.generateFrameNames("walk-",1,30,".png",4),30,!0),t.duck=e.animations.add("duck",Phaser.Animation.generateFrameNames("duck-",1,28,".png",4),30,!1),t.jump=e.animations.add("jump",Phaser.Animation.generateFrameNames("jump-",1,24,".png",4),30,!1),t.run=e.animations.add("run",Phaser.Animation.generateFrameNames("run-",1,21,".png",4),30,!0),t.flyingJump=e.animations.add("flying-jump",Phaser.Animation.generateFrameNames("flying-jump-",1,48,".png",4),30,!1),t.fire=e.animations.add("fire",Phaser.Animation.generateFrameNames("lazer-",1,31,".png",4),30,!1),t.stop=e.animations.add("stop",Phaser.Animation.generateFrameNames("stop-",1,2,".png",4),30,!0),t.idle=e.animations.add("idle",Phaser.Animation.generateFrameNames("front-idle-",1,179,".png",4),30,!0),t.die=e.animations.add("die",Phaser.Animation.generateFrameNames("front-death-",1,64,".png",4),30,!1),i.player=e,i.physics.arcade.enable(e),e.body.bounce.y=.4,e.body.gravity.y=900,e.body.setSize(22,95,0,-3),e.body.collideWorldBounds=!0,e),g=1,$=U("run"),_=(a=U(d),a.duck=o,a.enter=function(){console.log(`entering ${d}`),y.body.setSize(22,70,0,-2),y.x+=-6*g,y.y+=0},a.exit=function(){y.x-=-6*g,y.y-=0},a),b=U("idle"),k=(u=U(r),u.fire=u.duck=u.idle=u.walk=u.run=u.stop=u.duck=u.jump=u.flyingJump=o,u.enter=function(){console.log(`entering ${r}`),y.body.bounce.y=0,n.add.tween(y.body).to({y:y.body.y-100},1e3,Phaser.Easing.Linear.None,!0),y.body.velocity.x=200*g,y.x+=17*g,y.y+=9},u.exit=function(){y.body.bounce.y=.4,y.x-=17*g,y.y-=9},u),x=(f=U(s),f.stop=o,f.enter=function(){console.log(`entering ${s}`),y.body.setSize(22,95,0,-2),y.x+=.5*g,y.y+=-1},f.exit=function(){y.x-=.5*g,y.y-=-1},f),h=(m=U(l),m.fire=m.duck=m.idle=m.walk=m.run=m.stop=m.duck=m.jump=m.flyingJump=o,m.enter=function(){console.log(`entering ${l}`),y.body.setSize(22,100,0,-12),y.x+=14*g,y.y+=9},m.exit=function(){y.x-=14*g,y.y-=9},m),A=(p=U(c),p.stop=p.duck=p.fire=p.idle=p.walk=p.run=p.stop=p.duck=p.jump=p.flyingJump=o,p.enter=function(){console.log(`entering ${c}`),y.body.setSize(22,92,0,-102),y.x+=8,y.y+=102},p.exit=function(){y.x-=8*g,y.y-=102},p),N=b;function U(n){return{idle:j,walk:o,duck:w,run:C,stop:F,fire:S,jump:o,flyingJump:J,die:v,onKeyUp:F,onCursorLeft:C,onCursorRight:C,enter:function(){console.log(`entering ${n}`),y.body.setSize(22,95,0,-3)},exit:o,getName:function(){return n}}}function j(){y.animations.play("idle"),z(b)}function v(){y.animations.play("die"),y.animations.currentAnim.onComplete.addOnce(function(){console.log("die complete!"),y.destroy()},this),z(A)}function C(){y.scale.x=g,y.body.velocity.x=200*g,y.animations.play("run"),z($)}function w(){let n=t.duck,e=function(n,e){console.log(e.index),14===e.index&&y.animations.stop()};n.enableUpdate=!0,n.onUpdate.add(e,this),n.play(),y.animations.currentAnim.onComplete.addOnce(function t(){console.log("duck complete"),n.onUpdate.remove(e,this),F()},this),z(_)}function F(){y.animations.play("stop"),z(x)}function J(){let n=t.flyingJump,e=(n.frameTotal/1,y.body.offset.y);console.log(`total frames: ${n.frameTotal}`),console.log(`origYOffset : ${e}`),y.body.offset.x+=10*g,y.body.offset.y-=30,y.body.y-=22;let o=function(n,e){console.log(e.index),e.index<52?(console.log(`up y offset: ${y.body.offset.y}`),y.body.offset.y-=1):(console.log(`down y offset: ${y.body.offset.y}`),y.body.offset.x-=1*g,y.body.offset.y+=2)};n.enableUpdate=!0,n.onUpdate.add(o,this),n.play(),z(k),y.animations.currentAnim.onComplete.addOnce(function e(){console.log("jump complete"),y.body.offset.y+=24,n.onUpdate.remove(o,this),F()},this)}function S(){let n=t.fire;n.enableUpdate=!0;let e=0;var o=function(n,t){console.log(e),++e};n.onUpdate.add(o,this),y.animations.play("fire"),z(h),y.animations.currentAnim.onComplete.addOnce(function(){console.log("fire complete!"),n.onUpdate.remove(o,this),F()},this)}function z(n){N.exit(),(N=n).enter()}return{asset:y,onKeyUp:function(){N.onKeyUp()},onCursorRight:function(){N.onCursorRight()},onCursorLeft:function(){N.onCursorLeft()},run:function(){N.run()},duck:function(){N.duck()},idle:function(){N.idle()},fire:function(){N.fire()},flyingJump:function(){N.flyingJump()},stop:function(){N.stop()},die:function(){N.die()},getStateName:function(){return N.getName()},setState:z,setDirection(n){g=n}}}}(window);
