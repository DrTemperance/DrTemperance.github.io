var LineByLineReader=require("line-by-line"),args=process.argv.slice(2);args&&args.length||process.stderr.write("Missing filename\n");var filename=args[0],threshold=parseInt(args[1])||0,inputFile=new LineByLineReader(filename),result={firstNames:{male:[],female:[]}};inputFile.on("error",process.stderr.write),inputFile.on("line",function e(r){var i=r.split(",");if(!(i.length<3)){var n=i[0],s=i[1];!(i[2]<threshold)&&("M"==s?result.firstNames.male.push(n):"F"==s?result.firstNames.female.push(n):process.stderr.write("Invalid gender '"+s+"' for name '"+n+"'!\n"))}}),inputFile.on("end",function e(){process.stdout.write(JSON.stringify(result))});
