<html lang='EN'>
<head>
	<link href='Heads/Nitwit.webp' id='favicon' rel='icon' />
	<title>ERR!!!</title>
	<meta charset='UTF-8' />
	<style>
		@font-face {
			src         : url(Minecraft.otf);
			font-family : MCFont;
			}

		* {
			font-family     : 'MCFont', 'Curlz MT', 'sans-serif' !important;
			font-size       : xx-large;
			user-select     : none;
			overflow        : hidden;
			cursor          : default;
			margin          : auto;
			list-style-type : none;
			}

		#Shop_Button {
			position   : fixed;
			bottom     : 0;
			right      : 0;
			z-index    : 1000;
			cursor     : pointer;
			transition : 0.5s ease;
			filter     : drop-shadow(0 1px 3px rgba(0, 0, 0, 0.25));
			}

		progress, #Bossbar {
			accent-color : #60B;
			filter       : drop-shadow(0 1px 3px rgba(0, 0, 0, 0.25));
			width        : 750px;
			margin       : auto;
			position     : absolute;
			top          : 28px;
			left         : 0;
			right        : 0;
			transition   : 0.5s ease;
			}

		#Villager {
			background-size : 100% 100%;
			position        : fixed;
			}

		.Board {
			background-size : 100% 100%;
			position        : fixed;
			z-index         : -1000;
			height          : 100vh;
			width           : 100vw;
			bottom          : 0;
			right           : 0;
			left            : 0;
			top             : 0;
			}

		.Level {
			pointer-events : none;
			text-align     : center;
			width          : fit-content;
			position       : fixed;
			top            : 0;
			left           : 0;
			right          : 0;
			order          : 0;
			}

		.Chat {
			background  : rgba(0, 0, 0, 0.5);
			height      : fit-content;
			align-items : center;
			width       : fit-content;
			position    : fixed;
			text-align  : left;
			z-index     : 1000;
			padding     : 3px;
			bottom      : 75px;
			left        : 0;
			color       : #FFF;
			& .Death,
			& .Join {
				text-align : left;
				font-size  : 28px;
				margin     : 8px 0;
				z-index    : 1000;
				&.Join,
				&.Death {
					display : none;
					&.Join {color : #FF0;}
					}
				}
			}

		#Villager {
			position : fixed;
			z-index  : 750;
			cursor   : pointer;
			}

		#Stats {
			filter         : drop-shadow(0px 0px 1px #111);
			flex-direction : column;
			height         : fit-content;
			width          : fit-content;
			position       : absolute;
			z-index        : 1000;
			bottom         : 0;
			right          : 0;
			left           : 0;
			& #Heart_Bar {
				background-size : 32px 32px;
				display         : inline-flex;
				height          : fit-content;
				width           : fit-content;
				padding         : 4px;
				order           : 0;
				pointer-events  : none;
				& .Heart {
					padding : 1px;
					width   : 56px;
					}
				}
			& #Hotbar {
				background      : url(Stats/Hotbar.png) no-repeat center;
				background-size : 100% 100%;
				width           : 576px;
				display         : flex;
				padding         : 4px;
				height          : 64px;
				order           : 1;
				& .Bar {
					background      : url(Stats/HotbarSlot.webp) no-repeat center;
					background-size : 100% 100%;
					height          : 64px;
					width           : 64px;
					padding         : 0;
					margin          : 0;
					& img {
						background : none;
						cursor     : pointer;
						height     : 50px;
						margin     : auto;
						width      : 50px;
						padding    : 7px;
						}
					&:hover {
						background-image : url(Stats/SelectedSlot.webp);
						transform        : scale(1.1);
						transition       : all 0.2s;
						}
					}
				}
			}

		#Close {
			cursor      : pointer;
			font-weight : bolder;
			}
	</style>
</head>

<body>
<div class='Level'>Main Menu - Villager Clicker</div>
<progress id='Bossbar' max='100' value='100'></progress>
<div class='Board'></div>
<span id='Villager'></span>
<div class='Chat'>
	<li class='nitwit Death'>Nitwit was slain by @p</li>
	<li class='farmer Join'>Farmer joined the game</li>
	<li class='farmer Death'>Farmer was slain by @p</li>
	<li class='mason Join'>Mason joined the game</li>
	<li class='mason Death'>Mason was slain by @p</li>
	<li class='librarian Join'>Librarian joined the game</li>
	<li class='librarian Death'>Librarian was slain by @p</li>
	<li class='weaponsmith Join'>Weaponsmith joined the game</li>
	<li class='weaponsmith Death'>Weaponsmith was slain by @p</li>
	<li class='cleric Join'>Cleric joined the game</li>
	<li class='cleric Death'>Cleric was slain by @p</li>
	<li class='trader Join'>Wandering Trader joined the game</li>
	<li class='trader Death'>Wandering Trader was slain by @p</li>
</div>
<div id='Stats'>
	<div id='Heart_Bar'>
		<img class='Heart' id='health1' src='Stats/FullHeart.png' />
		<img class='Heart' id='health2' src='Stats/FullHeart.png' />
		<img class='Heart' id='health3' src='Stats/FullHeart.png' />
		<img class='Heart' id='health4' src='Stats/FullHeart.png' />
		<img class='Heart' id='health5' src='Stats/FullHeart.png' />
		<img class='Heart' id='health6' src='Stats/FullHeart.png' />
		<img class='Heart' id='health7' src='Stats/FullHeart.png' />
		<img class='Heart' id='health8' src='Stats/FullHeart.png' />
		<img class='Heart' id='health9' src='Stats/FullHeart.png' />
		<img class='Heart' id='health10' src='Stats/FullHeart.png' />
	</div>
	<div class='Bar'><img class='Item' draggable='false' id='item0' onclick='HotbarClick(this)'></div>
	<div draggable='false' id='Hotbar' onclick='GameAudio.GUI_Click.play()'>
		<div class='Bar'><img class='item' draggable='false' id='item1' onclick='HotbarClick(this)'></div>
		<div class='Bar'><img class='item' draggable='false' id='item2' onclick='HotbarClick(this)'></div>
		<div class='Bar'><img class='item' draggable='false' id='item3' onclick='HotbarClick(this)'></div>
		<div class='Bar'><img class='item' draggable='false' id='item4' onclick='HotbarClick(this)'></div>
		<div class='Bar'><img class='item' draggable='false' id='item5' onclick='HotbarClick(this)'></div>
		<div class='Bar'><img class='item' draggable='false' id='item6' onclick='HotbarClick(this)'></div>
		<div class='Bar'><img class='item' draggable='false' id='item7' onclick='HotbarClick(this)'></div>
		<div class='Bar'><img class='item' draggable='false' id='item8' onclick='HotbarClick(this)'></div>
		<div class='Bar'><img class='item' draggable='false' id='item9' onclick='HotbarClick(this)'></div>
	</div>
</div>

<button id='Shop_Button' onclick="document.getElementById('Player.Command.Index').showModal()">Outpost</button>

<dialog id='Player.Command.Index'>
	<span id='Close'>X</span>
	<p>You left and went to the store! I hope you had a good time!</p>
	<div id='Shops'>
		<button onclick="OpenShop('nurse')">Nurse Rancid</button>
		<button onclick="OpenShop('cleric')">Cleric</button>
		<button onclick="OpenShop('weaponsmith')">Weaponsmith</button>
		<button onclick="OpenShop('armorer')">Armorer</button>
		<button onclick="OpenShop('farmer')">Farmer</button>
		<button onclick="OpenShop('mason')">>Mason</button>
		<button onclick="OpenShop('librarian')">Librarian</button>
		<button onclick="OpenShop('smith')">Mistah Smith</button>
		<!--TODO Custom Class Shops-->
	</div>
	<div id='Stations'>
		<button>Furnace</button>
		<button>Campfire</button>
		<button>Stonecutter</button>
		<button>Grindstone</button>
		<button>Smithing Table</button>
		<button>Anvil</button>
		<button>Brewing Stand</button>
		<button>Enchanting Table</button>
		<button>Beacon</button>
	</div>
</dialog>
<dialog id='InitMsg'></dialog>

<script>
  const OpenShop = Target=>{
	  let ShopUI = document.getElementById('Player.Command.Index'), Data = PlayerData.Shops[Target];
	  ShopUI.appendChild(document.createElement('h1').textContent = Data.name);
	  for (let Content of Data.content) {
		  ShopUI.appendChild(document.createElement('div'));
		  ShopUI.children[ShopUI.children.length - 1].appendChild(document.createElement('img').src = Content.img);
		  ShopUI.children[ShopUI.children.length - 1].appendChild(document.createElement('h2').textContent = Content.name);
		  ShopUI.children[ShopUI.children.length - 1].appendChild(document.createElement('p').textContent = Content.description);
	  }
	  ShopUI.appendChild(document.createElement('div'));
  };

  const GameAudio = {
	        GUI_Click       : new Audio('Audio/Click.mp3'),
	        Player_Hurt     : new Audio('Audio/Player_Hurt.mp3'),
	        Villager_Ambient: new Audio('Audio/Villager_Ambient.mp3'),
	        Villager_Death  : new Audio('Audio/Villager_Death.mp3'),
	        Villager_Hurt   : new Audio('Audio/Villager_Hurt.mp3')
        },
        LevelTxt  = document.querySelector('.Level'),
        Villager  = document.getElementById('Villager'),
        Board     = document.querySelector('.Board'),
        Chat      = document.querySelector('.Chat'),
        Bossbar   = document.getElementById('Bossbar'),
        Heart     = {};

  for (let H = 10; H>=1; H--) {
	  Heart[`health${H}`] = document.getElementById(`health${H}`);
	  Heart[`health${H}`].requirement = H * 2;
  }

  let level = 1,
      x     = Villager.x;

  const GameLevels = [
	  {
		  name      : 'The Death',
		  size      : '0px',
		  background: 'Backgrounds/DeathScreen.webp',
		  head      : undefined,
		  movement  : '(0|0)'
	  }, {
		  name      : 'The Nitwit',
		  health    : 10,
		  phases    : 1,
		  size      : '300px',
		  background: 'Backgrounds/generic.webp',
		  head      : 'Heads/Nitwit.webp',
		  movement  : [`(${x}|${x})`]
	  }, {
		  name      : 'The Farmer',
		  health    : 20,
		  phases    : 2,
		  size      : '275px',
		  background: 'Backgrounds/farm.webp',
		  head      : 'Heads/Farmer.webp',
		  movement  : [
			  `(${x}|${Math.cos(x)})`,
			  `(${x}|${Math.sin(x)})`,
			  `(${x}|${x})`,
			  `(${x}|${Math.tan(x)})`
		  ]
	  }, {
		  name      : 'The Mason',
		  health    : 30,
		  phases    : 2,
		  size      : '250px',
		  background: 'Backgrounds/mason.jpg',
		  head      : 'Heads/Nitwit.webp',
		  movement  : [
			  `(${x}|${Math.tan(x)})`,
			  `(${x}|${Math.cos(x)})`,
			  `(${x}|${x})`,
			  `(${x}|${Math.sin(x)})`,
			  `(${x}|${Math.log(x * 0.5)})`
		  ]
	  }, {
		  name      : 'The Librarian',
		  health    : 40,
		  phases    : 3,
		  size      : '200px',
		  background: 'Backgrounds/library.webp',
		  head      : 'Heads/Librarian.webp',
		  movement  : [
			  `(${x}|${Math.cos(x)})`,
			  `(${x}|${x})`,
			  `(${x}|${Math.log(x)})`,
			  `(${x}|${Math.tan(x ** Math.random() * 2)})`,
			  `(${x}|${Math.sin(x)})`
		  ]
	  }, {
		  name      : 'The Weaponsmith',
		  health    : 50,
		  phases    : 3,
		  size      : '180px',
		  background: 'Backgrounds/blacksmith.webp',
		  head      : 'Heads/Weaponsmith.webp',
		  movement  : [
			  `(${x}|${Math.log(x)})`,
			  `(${x}|${Math.tan(x)})`,
			  `(${x}|${x ** 2})`,
			  `(${x}|${Math.sin(x ** 2)})`,
			  `(${x}|${x})`
		  ]
	  }, {
		  name      : 'The Cleric',
		  health    : 64,
		  phases    : 4,
		  size      : '150px',
		  background: 'Backgrounds/church.webp',
		  head      : 'Heads/Cleric.webp',
		  movement  : [
			  `(${x}|${Math.log(x)})`,
			  `(${x}|${x})`,
			  `(${x}|${x ** 3})`,
			  `(${x}|${Math.tan(x)})`,
			  `(${x}|${Math.cos(x)})`,
			  `(${x}|${x + Math.random() * x})`
		  ]
	  }, {
		  name      : 'The Wandering Trader',
		  health    : 100,
		  phases    : 5,
		  size      : '100px',
		  background: 'Backgrounds/traderBack.webp',
		  head      : 'Heads/trader.webp',
		  movement  : [`(0|0)`]
	  }
  ];

  let VillagerHealth = GameLevels[level].health / GameLevels[level].phases,
      VillagerHeight = parseInt(GameLevels[level].size.height),
      VillagerWidth  = parseInt(GameLevels[level].size.width),
      ClientHeight   = Board.clientHeight,
      ClientWidth    = Board.clientWidth,
      Speed_Y1       = 30,
      Speed_X        = 30,
      PlayerDamage   = 0,
      Points         = 0,
      Pos_X,
      Pos_Y,
      Interval,
      VillagerSize,
      LastTime,
      Totem;

  document.querySelector('title').textContent = `${GameLevels[level].name} - Villager Clicker`;

  const SetBossbar = ()=>Bossbar.value = (Points / VillagerHealth) * Bossbar.max - Bossbar.max;

  async function DrawBoard() {
	  VillagerWidth = parseInt(GameLevels[level].size);
	  VillagerHeight = VillagerWidth * 1.25;
	  VillagerSize = Math.max(Villager.clientWidth, Villager.clientHeight);

	  Pos_Y = Math.random() * (Board.clientHeight - VillagerSize - VillagerHeight);
	  Pos_X = Math.random() * (Board.clientWidth - VillagerSize - VillagerWidth);

	  Villager.style.width = GameLevels[level].size;
	  Villager.style.height = `${VillagerHeight}px`;
	  Villager.style.left = `${Pos_X}px`;
	  Villager.style.top = `${Pos_Y}px`;
	  Villager.style.backgroundImage = `url(${GameLevels[level].head})`;
	  Board.style.background = `url(${GameLevels[level].background})`;
	  Board.style.Backgroundsize = '100% 100%';
	  for (let I = 0; I<PlayerData.Hotbar.length; I++) document.getElementById(`item${I}`).src = PlayerData.Items[PlayerData.Hotbar[I].item].image;

	  DrawHearts();
  }

  const DeathMessage = ()=>{//TODO  dom selector manipulation
  };
  const JoinMessage = ()=>{//TODO  dom selector manipulation
  };

  async function Update(Timestamp) {
	  // Update timing for FPS calculations //
	  let VilOffset;
	  LastTime || (LastTime = Timestamp);
	  const D_Time = (LastTime - Timestamp) / 500;

	  LevelTxt.textContent = `Level ${level} - ${GameLevels[level].name}`;

	  // Progress level check //
	  if (Points>=VillagerHealth) {
		  level++;
		  DeathMessage();
		  document.querySelector('title').textContent = `${GameLevels[level].name} - Villager Clicker`;
		  document.getElementById('favicon').href = GameLevels[level].head;
		  JoinMessage();
		  Villager.style.backgroundImage = `url(${GameLevels[level].head})`;
		  Bossbar.max = GameLevels[level].health;
		  Speed_Y1 *= 0.75;
		  Speed_X *= 0.75;
		  Points = 0;
		  await GameAudio.Villager_Death.play();
		  SetBossbar();
		  DrawBoard();
		  DrawBoard();
	  }

	  let DX = Pos_X + Speed_X * D_Time,
	      DY = Pos_Y + Speed_Y1 * D_Time;

	  Villager.style.width = GameLevels[level].size;
	  Villager.style.height = `${(parseInt(GameLevels[level].size) * 1.25)}px`;
	  Villager.style.left = `${Pos_X}px`;
	  Villager.style.top = `${Pos_Y}px`;

	  // Check for collisions //
	  VilOffset = Math.ceil(VillagerWidth / 3.75),
	  !(DY<ClientHeight) && (DY = ClientHeight, Speed_Y1 = -Speed_Y1),
	  DY<0 && (DY = 0, Speed_Y1 = -Speed_Y1),
	  !(DX<ClientWidth + VilOffset) && (DX = ClientWidth + VilOffset, Speed_X = -Speed_X),
	  !(DX>=0) && (DX = 0, Speed_X = -Speed_X);

	  // Update the positions after all checks //
	  Pos_X = DX;
	  Pos_Y = DY;

	  LastTime = Timestamp;
	  requestAnimationFrame(Update);
  }

  const PlayerAttack = ()=>{
	  Points++;

	  GameAudio.Villager_Hurt.play();
	  SetBossbar();

	  Speed_X = -Speed_Y1;
	  Speed_Y1 = -Speed_X;
	  Speed_X>0 ? Speed_X += 50 : Speed_X -= 50;
	  Speed_Y1>0 ? Speed_Y1 += 50 : Speed_Y1 -= 50;

	  Villager.style.rotate = '25deg';
	  Villager.style.filter = `blur(${(Math.PI / Speed_X)}px)`;
	  Villager.style.transition = '0.1s ease-out';
	  setTimeout(()=>{
		  Villager.style.filter = '';
		  Villager.style.transition = '';
		  Villager.style.rotate = '0deg';
	  }, 150);
	  DrawBoard();
  };

  const VillagerAttack = ()=>{
	  PlayerDamage++;

	  level!==0 && (GameAudio.Player_Hurt.play(), DrawHearts());

	  if (PlayerDamage>=20 && level!==0) if (()=>Hotbar.forEach(item=>item.type==='Totem')) {
		  PlayerDamage *= 0.25;
		  Totem--;
	  } else {
		  level = 0;
		  DrawBoard();
		  Chat.style.display = 'none';
		  let rotate = 0;
		  document.getElementById('Hotbar').transition = '1s linear';
		  document.getElementById('Hotbar').scaleY = 0;
		  setInterval(()=>{
			  for (let H = 1; H<=10; H++) {rotate += 50 * Math.random(), Heart[`health${H}`].style.transition = '0.2s linear', Heart[`health${H}`].style.transform = `rotate(${rotate}deg)`;}
		  }, 25);
		  cancelAnimationFrame(Interval);
	  }
  };

  async function DrawHearts() {
	  for (let D = 10; D>=1; D--) {
		  20 - PlayerDamage<2 * D
		  ? 20 - PlayerDamage===1 - 2 * D && (Heart[`health${D}`].status = 'half', Heart[`health${D}`].src = 'Stats/HalfHeart.png')
		  : Heart[`health${D}`].status = 'full', Heart[`health${D}`].src = 'Stats/FullHeart.png',
		  20 - PlayerDamage<1 - 2 * D && (Heart[`health${D}`].status = 'empty', Heart[`health${D}`].src = 'Stats/Empty.png');
	  }
  }

  window.addEventListener('resize', async ()=>DrawBoard());

  Villager.addEventListener('mousedown', PlayerAttack);
  Board.addEventListener('mousedown', VillagerAttack);
  document.getElementById('Close').addEventListener('click', async ()=>document.getElementById('Player.Command.Index').close());
  document.addEventListener('keydown', async ({code})=>{
	  switch (code) {
		  case 'Tab':
			  document.getElementById('Player.Command.Index').showModal();
			  break;
		  case 'Escape':
			  document.getElementById('Player.Command.Index').close();
			  break;
		  case 'Slash':
			  // TODO quasi-Chat
			  Chat.style.width = '500px';
			  Chat.appendChild(document.createElement('input'));
			  break;
		  case 'Enter':
			  Chat.style.width = 'fit-content';
			  Chat.appendChild(document.createElement('input'));
			  break;
		  default:
			  break;
	  }
  });

  DrawBoard();
  Interval = requestAnimationFrame(Update);

  const PlayerData = {
	  Items : [
		  {
			  action: ()=>console.log('This is empty.'),
			  id    : 0,
			  image : 'Items/empty.webp',
			  item  : null,
			  name  : 'Empty',
			  type  : null
		  },
		  {
			  type: 'sword', action: 'attack',
			  tier: {
				  diamond     : {
					  name       : 'Diamond Sword',
					  damage     : 5,
					  aoa        : 7,
					  image      : 'Items/diamondSword.png',
					  attackSpeed: 630,
					  aria       : {name: 'Diamond Sword', lore: 'diamondy'}
				  },
				  id          : 1,
				  iron        : {
					  name       : 'Iron Sword',
					  damage     : 3,
					  aoa        : 7,
					  image      : 'Items/ironSword.png',
					  attackSpeed: 630,
					  aria       : {name: 'Iron Sword', lore: 'irony'}
				  }, netherite: {
					  name       : 'Netherite Sword',
					  damage     : 7,
					  aoa        : 8,
					  image      : 'Items/netheriteSword.png',
					  attackSpeed: 630,
					  aria       : {name: 'Netherite Sword', lore: 'tina'}
				  }, stone    : {
					  name       : 'Stone Sword',
					  damage     : 1,
					  aoa        : 6,
					  image      : 'Items/stoneSword.png',
					  attackSpeed: 630,
					  aria       : {name: 'Stone Sword', lore: 'stoney'}
				  }, wooden   : {
					  name       : 'Wooden Sword',
					  damage     : 0,
					  aoa        : 6,
					  image      : 'Items/woodenSword.png',
					  attackSpeed: 630,
					  aria       : {name: 'Wooden Sword', lore: 'woody'}
				  }
			  }
		  },
		  {
			  type: 'axe', action: 'attack',
			  tier: {
				  wooden      : {
					  name       : 'Wooden Axe',
					  damage     : 1,
					  aoa        : 0,
					  image      : 'Items/woodenAxe.png',
					  attackSpeed: 1250,
					  aria       : {name: 'Wooden Axe', lore: 'woody'}
				  }, stone    : {
					  name       : 'Stone Axe',
					  damage     : 3,
					  aoa        : 0,
					  image      : 'Items/stoneAxe.png',
					  attackSpeed: 1250,
					  aria       : {name: 'Stone Axe', lore: 'stoney'}
				  }, iron     : {
					  name       : 'Iron Axe',
					  damage     : 4,
					  aoa        : 0,
					  image      : 'Items/ironAxe.png',
					  attackSpeed: 1110,
					  aria       : {name: 'Iron Axe', lore: 'irony'}
				  }, diamond  : {
					  name       : 'Diamond Axe',
					  damage     : 7,
					  aoa        : 0,
					  image      : 'Items/diamondAxe.png',
					  attackSpeed: 1000,
					  aria       : {name: 'Diamond Axe', lore: 'diamondy'}
				  }, netherite: {
					  name       : 'Netherite Axe',
					  damage     : 9,
					  aoa        : 0,
					  image      : 'Items/netheriteAxe.png',
					  attackSpeed: 1000,
					  aria       : {name: 'Netherite Axe', lore: 'tina'}
				  }, id       : 2
			  }
		  },
		  {
			  type: 'pickaxe', action: 'attack',
			  tier: {
				  wooden      : {
					  name       : 'Wooden Pickaxe',
					  damage     : 0,
					  aoa        : -7,
					  image      : 'Items/woodenPickaxe.png',
					  attackSpeed: 200,
					  aria       : {name: 'Wooden Pickaxe', lore: 'woody'}
				  }, stone    : {
					  name       : 'Stone Pickaxe',
					  damage     : 1,
					  aoa        : -6,
					  image      : 'Items/stonePickaxe.png',
					  attackSpeed: 200,
					  aria       : {name: 'Stone Pickaxe', lore: 'stoney'}
				  }, iron     : {
					  name       : 'Iron Pickaxe',
					  damage     : 2,
					  aoa        : -5,
					  image      : 'Items/ironPickaxe.png',
					  attackSpeed: 200,
					  aria       : {name: 'Iron Pickaxe', lore: 'irony'}
				  }, diamond  : {
					  name       : 'Diamond Pickaxe',
					  damage     : 3,
					  aoa        : -4,
					  image      : 'Items/diamondPickaxe.png',
					  attackSpeed: 150,
					  aria       : {name: 'Diamond Pickaxe', lore: 'diamondy'}
				  }, netherite: {
					  name       : 'Netherite Pickaxe',
					  damage     : 5,
					  aoa        : -3,
					  image      : 'Items/netheritePickaxe.png',
					  attackSpeed: 100,
					  aria       : {name: 'Netherite Pickaxe', lore: 'tina'}
				  }, id       : 3
			  }
		  },
		  {action: null, id: 4, image: 'Items/totem.png', item: 'Totem', name: 'Totem of Undying', type: 'Totem'}
	  ],
	  Hotbar: [
		  {item: 0},
		  {item: 0},
		  {item: 0},
		  {item: 0},
		  {item: 0},
		  {item: 0},
		  {item: 0},
		  {item: 0},
		  {item: 0},
		  {item: 0}
	  ],
	  Shops : {
		  cleric     : {
			  name    : 'The Cleric',
			  contents: {
				  potions    : [
					  {
						  name    : 'Healing Potion',
						  duration: 'instant',
						  effect  : ['Healing'],
						  strength: [1, 2, 3]
					  }, {
						  name    : 'Speed Potion',
						  duration: 0.5,
						  effect  : ['Speed'],
						  strength: [1, 2, 3]
					  }, {
						  name    : 'Strength Potion',
						  duration: 0.75,
						  effect  : ['Strength'],
						  strength: [1, 2]
					  }, {
						  name    : 'Resistance Potion',
						  duration: 0.25,
						  effect  : ['Resistance'],
						  strength: [1]
					  }
				  ],
				  specialfood: [
					  {
						  name             : 'Golden Carrot',
						  hunger           : 4,
						  confoundingEffect: ['Vision']
					  }, {
						  name             : 'Golden Apple',
						  hunger           : 6,
						  confoundingEffect: ['Resistance']
					  }, {
						  name             : 'Enchanted Golden Apple',
						  hunger           : 8,
						  confoundingEffect: ['Healing', 'Resistance', 'Vision']
					  }
				  ],
				  tables     : ['EnchantingTable']
			  },
			  icon    : 'Shops/Cleric.png'
		  },
		  weaponsmith: {
			  name    : 'The Weaponsmith',
			  contents: [
				  {
					  Sword     : {
						  Precision: 0.3,
						  Speed    : 1.0,
						  Strength : 0.7
					  }, Axe    : {
						  Precision: 1.3,
						  Strength : 1.7,
						  Speed    : 0.7
					  }, Pickaxe: {
						  Precision: 3.0,
						  Strength : 2.2,
						  Speed    : 0.7
					  }
				  },
				  {SmithingTable: !1}
			  ],
			  model   : 'Shops/cleric.png'
		  },
		  armorer    : {
			  name   : 'The Armorer',
			  content: {
				  armor : [
					  'Leather',
					  'Chain',
					  'Iron',
					  'Gold',
					  'Diamond',
					  'Netherite'
				  ],
				  tables: ['SmithingTable', 'Anvil']
			  },
			  icon   : 'Shops/armorer.png'
		  },
		  farmer     : {
			  name   : 'The Farmer',
			  content: {
				  food  : [
					  {
						  name             : 'Cooked Steak',
						  hunger           : 8,
						  confoundingEffect: !1
					  }, {
						  name             : 'Baked Potato',
						  hunger           : 6,
						  confoundingEffect: !1
					  }, {
						  name             : 'Carrot',
						  hunger           : 4,
						  confoundingEffect: !1
					  }, {
						  name             : 'Cooked Chicken',
						  hunger           : 10,
						  confoundingEffect: !1
					  }, {
						  name             : 'Apple',
						  hunger           : 2,
						  confoundingEffect: !1
					  }, {
						  name             : 'Cake',
						  hunger           : 16,
						  confoundingEffect: !1
					  }
				  ],
				  tables: ['Smoker', 'Campfire']
			  },
			  icon   : 'Shops/farmer.png'
		  },
		  mason      : {
			  name   : 'The Mason',
			  content: {
				  materials:
								  [
									  {
										  Base  : 'Wood',
										  Stock : 256,
										  Health: 3
									  }, {
									  Base  : 'Stone',
									  Stock : 256,
									  Health: 6
								  }, {
									  Base  : 'Brick',
									  Stock : 256,
									  Health: 9
								  }
								  ],
				  tables   : ['stonecutter']
			  },
			  icon   : 'Shops/mason.png'
		  },
		  stations   : {
			  enchantingTable: {acquired: !1, lapis: 0, level: 1},
			  smithingTable  : {acquired: !1},
			  stonecutter    : {acquired: !1, level: 0},
			  grindstone     : {acquired: !1, modules: {recycle: !1}},
			  anvil          : {acquired: !1, damage: 0},
			  campfire       : {acquired: !1, fuel: 0},
			  furnace        : {
				  acquired: !1,
				  fuel    : 0,
				  modules : {
					  upgraded: !1,
					  blast   : !1,
					  smoke   : !1
				  }
			  }
		  },
		  classist   : {
			  playerClass: 'unclassified',
			  // Can be ['? (unknown)','Engineer (Idle)','Bowman (Range)','Mage (Magic)','Brute' (Melee)]
			  unset     : !1,
			  engineer  : !1,
			  fletcher  : !1,
			  illusioner: !1,
			  brute     : !1
		  }
	  }
  };

  // Function Calls //
  document.addEventListener('keydown', async e=>{
	  switch (e.key) {
		  case 'Tab':
			  document.getElementById('Player.Command.Index').showModal;

		  case 'Escape':
			  document.getElementById('Player.Command.Index').close();

		  default:
			  typeof e==='number' ? document.getElementById(`item${e.key}`).click() : null;
			  break;
	  }
  });

  // Start Shops //

  for (let s = 0; s<Shops.length; s++) document.getElementById('Shops').children[s].innerHTML = PlayerData.Shops[i];

  // Check For 'Next' Open Slot //
  async function OpenSlot() {for (let Slot of PlayerData.Hotbar) if (Slot.item===0 || Slot.type==='empty') return Slot;}

  function HotbarClick(IntSlot) {
	  const Slot = IntSlot.id.slice(4), Item = PlayerData.Hotbar[Slot];
	  Item.type ? new HandleItem(Slot, Item) : console.error(`Slot ${Slot} returned w/ ${Item.item}`);
  }

  const AttackData = (aoa, damage, attackSpeed, name, image, aria)=>{
	  let AttackData = {aoa, damage, attackSpeed, name, image, aria};
	  console.info(AttackData);
  };

  function HandleItem(ID) {
	  let Slot = ID.id.split('item')[1].trim();
	  let Item = [... (PlayerData.Hotbar)][Slot];
	  console.info(`slot: ${Slot}, item: ${Item}`);
	  switch (Item.type) {
		  case 'sword':
			  let {aoa, damage, attackSpeed, name, image, aria} = Item.tier[`${Item.tier}`];
			  AttackData(aoa, damage, attackSpeed, name, image, aria);

		  case 'axe':
		  case 'pickaxe':
		  case 'potion':
		  case 'Totem':

		  default:
			  console.info(`Case saw ${Item}, ${this}`);
			  break;
	  }
  }

  const MimisKetamineAddiction = 'tilly123';

  const _Give = (key, itemId)=>
				  key===MimisKetamineAddiction
				  ? (PlayerData.Hotbar[OpenSlot()].item = PlayerData.Items[itemId])
				  : console.log(`Not that easy, ${key} is NOT correct!`);

  const _Damage = (key, delay)=>
				  key===MimisKetamineAddiction
				  ? ()=>delay ? ()=>setInterval(()=>document.getElementById('Villager').click(), Number(delay<200 ? 200 : delay)) : document.getElementById('Villager').click()
				  : console.log(`Not that easy, ${key} is NOT correct!`);

  const _XP = (key, inLevel)=>{
	  if (key!=='tilly123') {console.log(`Not that easy, ${key} is NOT correct!`);}
	  level = inLevel, DrawBoard();
  };

  // Movement //
  const Movement = {
	  logarithmic: async ()=>Math.log(x),
	  squared    : async ()=>Math.pow(x, 2),
	  cubic      : async ()=>Math.pow(x, 3),
	  sine       : async ()=>Math.sin(x),
	  cosine     : async ()=>Math.cos(x),
	  tangent    : async ()=>Math.sin(x) / Math.cos(x),
	  cotangent  : async ()=>Math.cos(x) / Math.sin(x),
	  secant     : async ()=>1 / Math.cos(x),
	  cosecant   : async ()=>1 / Math.sin(x)
  };

  // Begin //

  DrawBoard();
  DrawHearts();

</script>
</body>
</html>